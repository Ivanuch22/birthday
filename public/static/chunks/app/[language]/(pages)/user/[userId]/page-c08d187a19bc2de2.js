(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[155],{1775:function(e,t,n){Promise.resolve().then(n.t.bind(n,231,23)),Promise.resolve().then(n.bind(n,4857)),Promise.resolve().then(n.t.bind(n,5328,23)),Promise.resolve().then(n.t.bind(n,5787,23)),Promise.resolve().then(n.t.bind(n,6357,23)),Promise.resolve().then(n.t.bind(n,8621,23)),Promise.resolve().then(n.bind(n,7105))},2890:function(e,t,n){"use strict";n.d(t,{I:function(){return r.I}});var r=n(2289)},7105:function(e,t,n){"use strict";n.d(t,{default:function(){return w}});var r=n(7437),a=n(6263),i=n(2265),o=n(777),s=n(9597),l=n(2890),u=n(30);function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date().getMonth()+1,n=new Date,[r,a]=e.split("/").map(Number),i=n.getFullYear();return(a<t||a===t&&r<n.getDate())&&i++,Math.ceil((new Date(i,a-1,r).getTime()-n.getTime())/864e5)}var c=n(9688),m=n.n(c),h=e=>{let{birthday:t}=e,n=d(t);return n>0&&(0,r.jsxs)(a.x,{tag:"p",className:m().daysUntilText,children:[n," day",1===n?"":"s"," until birthday"]})},f=n(9149),y=n.n(f),g=n(8598),p=n(7469),b=n(8041);function x(e){return["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"][e-1]}let _=i.memo(e=>{let{months:t,initialMonthIndex:n,userId:d,placeholders:c,onSubmit:m,initialDay:f,buttonText:_,showDaysUntil:v=!1,title:I,actionPath:j="/add-friend"}=e,[w,U]=(0,i.useState)(()=>({month:"".concat(n),day:"".concat(f),name:"",note:"",month_name:x(n),id:""})),[S,F]=(0,i.useState)(""),[P,D]=(0,i.useState)(d),[q,C]=(0,i.useState)(),[M,{data:T={},isLoading:H,isError:N,isSuccess:k}]=(0,p.l4)(),[A,{isLoading:O,isError:E,isSuccess:J}]=(0,b.kP)(),L=(0,i.useCallback)(async e=>{e.preventDefault(),m&&m(w),M({...w,email:function(){let e=["nomail.com"],t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="";for(var r=0;r<Math.floor(6*Math.random())+5;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n+"@"+e[Math.floor(Math.random()*e.length)]}(),password:"nopass"}).then(()=>{document.location.reload()})},[w]),G=(0,i.useCallback)((e,t)=>{U(n=>({...n,[t]:e,month_name:"month"===t&&x(e)}))},[w.month,w.day]),z=(0,i.useCallback)((e,t)=>{let{target:n}=e;U(e=>({...e,[t]:n.value}))},[]);(0,i.useEffect)(()=>{T.data&&C(T.data.userId),P&&q&&k&&q&&A({userId:P,friendId:q})},[A,q,k,P,T]);let{monthPlaceholder:Z,dayPlaceholder:B,cityPlaceholder:Q,notePlaceholder:Y,namePlaceholder:W}=c;return(0,r.jsxs)(u.Z,{children:[I&&(0,r.jsx)(a.x,{tag:"h2",children:I}),(0,r.jsxs)("form",{onSubmit:L,className:y().newUserFormInitial,children:[(0,r.jsxs)("div",{className:y().newUserFormInitial__formGroup,children:[(0,r.jsx)(l.I,{type:"text",placeholder:W,required:!0,value:w.name,onChange:e=>z(e,"name")}),(0,r.jsx)(g.Z,{required:!0,placeholder:Q,onChange:e=>z(e,"city")})]}),(0,r.jsx)(o.Z,{monthLabel:Z,dayLabel:B,months:t,initialMonthIndex:n,initialDay:f,onChangeHandler:G}),(0,r.jsx)(l.I,{type:"textfield",placeholder:Y,value:w.note,onChange:e=>z(e,"note")}),(0,r.jsx)(s.z,{type:"submit",children:_})]}),v&&S&&(0,r.jsx)(h,{birthday:S})]})});var v=n(2371),I=e=>{let{data:t,exclude:n,additionalColumns:a=[],t:i}=e,o=[{Header:i("name"),accessor:"name"},{Header:i("month"),accessor:"month_name"},{Header:i("day"),accessor:"day"},{Header:i("city"),accessor:"city"},{Header:i("language"),accessor:"language"},{Header:i("foreign"),accessor:"foreign"},{Header:i("another_foreign"),accessor:"another_foreign"},{Header:i("notes"),accessor:"note"},...a,{Header:"ID",accessor:"id"}];return(0,r.jsx)(v.default,{columns:n?o.filter(e=>!(null==n?void 0:n.includes(e.accessor))):o,data:t})},j=n(8024),w=e=>{let{addFriendTitle:t,upcomingFriendsTitle:n,addFriendButtonText:o,friendsData:s,months:l,currentDay:u,currentMonthIndex:c,language:m,userId:h,placeholders:f}=e,[y,g]=(0,i.useState)([]),[p,b]=(0,i.useState)([]),x=async e=>{try{let t=await fetch("/api/getAllUserFriends",{method:"POST",body:JSON.stringify({userId:e}),cache:"no-store",mode:"no-cors"}),n=await t.json();g(n)}catch(e){return console.error(e),[]}};(0,i.useEffect)(()=>{x(h)},[]),(0,i.useEffect)(()=>{b(y.map(e=>{let t=d("".concat(e.day,"/").concat(e.month));return{...e,days_until:t||0}}))},[y]);let{t:v}=(0,j.$)(m);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("section",{children:(0,r.jsx)(_,{userId:h,placeholders:f,title:t,showDaysUntil:!0,months:l,initialDay:u,initialMonthIndex:c,buttonText:o,onSubmit:e=>{g([{...e},...y])}})}),(0,r.jsxs)("section",{children:[(0,r.jsx)(a.x,{tag:"h2",children:n}),(0,r.jsx)(I,{data:p,t:v,exclude:["language","foreign","another_foreign","id"],additionalColumns:[{Header:v("days_until"),accessor:"days_until"}]})]})]})}},7469:function(e,t,n){"use strict";n.d(t,{Iw:function(){return u},YA:function(){return s},iJ:function(){return i},l4:function(){return o}});var r=n(8507),a=n(1050);let i=(0,r.LC)({baseQuery:a.r,endpoints:e=>({register:e.mutation({query:e=>({url:"/api/auth/sign-in",method:"POST",body:e})}),login:e.mutation({query:e=>({url:"/api/auth/login",method:"POST",body:e})}),me:e.query({query:e=>({url:"/api/auth/me?userId=".concat(e),credentials:"include"})}),remind:e.mutation({query:e=>({url:"/api/remind",method:"POST",body:{email:e}})})})}),{useRegisterMutation:o,useLoginMutation:s,useLazyMeQuery:l,useRemindMutation:u}=i},8041:function(e,t,n){"use strict";n.d(t,{BG:function(){return i},kP:function(){return o}});var r=n(8507),a=n(1050);let i=(0,r.LC)({baseQuery:a.r,endpoints:e=>({addFriendship:e.mutation({query:e=>{let{userId:t,friendId:n}=e;return{url:"/api/addFriendship",method:"POST",body:{userId:t,friendId:n}}}}),getAllUserFriends:e.query({query:e=>"/api/getAllUserFriends?userId=".concat(e)}),getAllUsers:e.query({query:e=>{let{birthday:t,city:n}=e;return"/api/getAllUsers?birthday=".concat(t,"&city=").concat(n)}})})}),{useAddFriendshipMutation:o,useGetAllUserFriendsQuery:s,useGetAllUsersQuery:l,useLazyGetAllUsersQuery:u}=i},9688:function(e){e.exports={daysUntilText:"DaysUntilBirthdayText_daysUntilText__w2WAm"}},9149:function(e){e.exports={newUserFormInitial:"NewUserFormInitial_newUserFormInitial__1a1su",newUserFormInitial__formGroup:"NewUserFormInitial_newUserFormInitial__formGroup__iJUD1"}}},function(e){e.O(0,[402,428,166,507,462,20,231,258,283,971,23,744],function(){return e(e.s=1775)}),_N_E=e.O()}]);